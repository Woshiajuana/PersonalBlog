

# Linux 基础

> Linux 是一款操作系统，免费、开源、安全、高效、稳定，处理高并发非常强悍，现在很多的企业级别的项目都部署到 linux/unix 服务器运行。


## 学习流程

- 第一阶段：linux 环境下的基本操作命令
    + 文件操作命令 (rm、mkdir、chmod、chown)；
    + 编辑工具使用（vi、vim）；
    + 用户管理（useradd、userdel、usermod）；
    ...
- 第二阶段：linux 的各种配置（环境变量配置、网络配置、服务配置）；
- 第三阶段：linux 下如何搭建对应语言的开发环境（大数据、javaEE、Python 等）；
- 第四阶段：能编写 shell 脚本，对 linux 服务器进行维护；
- 第五阶段：能进行安全设置，防止攻击，保障服务器正常运行，能对系统调优；
- 第六阶段：深入理解 linux 系统（对内核有研究），熟练掌握大型网站应用架构组成，并熟悉各个环节的部署和维护方法；


## Linux 的主要发行版本

以 linux 为内核的主要的发行版本
- Redhat 
- CentOSE
- Ubuntu
- Suse
- 红旗 Linux


## 虚拟机的网络连接三种形式

— 桥连接：虚拟机的系统可以和其他系统通信，但可能会造成 ip 冲突；
- NAT：网络地址转换方式，虚拟机的系统可以访问其他系统，但外网系统不能访问虚拟机系统，不会造成 ip 冲突；
- 主机模式：虚拟机系统是一个独立的主机，不能访问外网；


## Linux 目录结构

Linux 的文件系统是采用级层式的树状目录结构，在此结构中的最上层是根目录 `/`，然后
在此目录下再创建其他的目录。
**在 Linux 世界中，一切皆文件。**

```
/                           // 根目录
├── root                    // 
│   ├── Desktop             // 
│   ├── Malidir             // 
├── bin                     // 存放常用的命令 
├── boot
├── dev
├── etc
├── home
├── var
├── lib
├── usr                     // 
│   ├── bin                 // 
│   ├── lib                 // 
├── media                   // 
```

- **`/bin`**（`/usr/bin`、`/usr/local/bin`）：存放常用的命令；
- `/sbin`（`/usr/sbin/`、`/usr/local/sbin`）：s 就是 Super User 的意思，
这里存放的是系统管理员使用的系统管理程序；
- **`/home`**：存放普通用户的主目录，在 Linux 中每个用户都有一个自己的目录，一般该目录名
是以用户的账号命名的；
- **`/root`**：该目录为系统管理员，也称作超级权限者的用户主目录；
- `/lib`：系统开机所需要最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。
几乎所有的应用程序都需要用到这些共享库；
- `/lost+found`：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件；
- **`/etc`**：所有的系统管理所需要的配置文件和子目录；
- **`/usr`**：非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 Windows 下的 
program files 目录；
- **`/boot`**：存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件；
- `/proc`：是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息；
- `/srv`：service 的所写，存放一些服务启动之后需要提取的数据；
- `/sys`：这是 linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件
系统 sysfs；
- `/tmp`：这个目录是用来存放一些临时文件的；
- **`/dev`**：类似于 windows 的设备管理器，把所有的硬件用文件的形式存储；
- **`/media`**：linux 系统会自动识别一些设备，例如 U盘、光驱等等，当识别后，linux 会把识别
的设备挂载到这个目录下；
- **`/mnt`**：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部存储挂载在
/mnt/上，然后进入该目录就可以查看里面的内容了；
- `/opt`：这是给主机额外安装软件所摆放的目录。如安装 ORACLE 数据库就可以放到该目录下，默认空；
- **`/usr/local`**：这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序；
- **`/var`**：这个目录中存放着在不断扩充的东西，习惯将经常被修改的目录放到这个目录下。包括各自日志文件；
- `/selinux`：SELinux 是一种安全子系统，它能控制程序只能访问特定文件；

总结一下
- linux 的目录中有且只有一个根目录 `/`；
- linux 的各个目录存放的内容是规划好，不能乱放文件；
- linux 是以文件的形式管理我们的设备，因此在 linux 系统中，一切皆文件；


## vi 和 vim 编辑器

所有的 Linux 系统都会内置 vi 文本编辑器。vim 具有程序编辑的能力，可以看做是 vi 的增强版本，可以主动的以字体颜色
辨别语法的正确性，方便程序设计。代码不全、编辑以及错误跳转等方便编程的功能特别丰富。


### vi 和 vim 常用的三种模式

- 正常模式：以 vim 打开一个档案就直接进入。在这个模式中，可以使用『上下左右』按键来移动光标，
可以使用『删除字符』或『删除整行』来处理档案内容，也可以使用『复制、粘贴』来处理文件数据。
- 插入模式：按下 `i`、`I`、`o`、`O`、`a`、`A`、`r`、`R`等任何一个字母之后才会进入编辑模式，
一般来说按 `i` 即可。按 `esc` 健可以退出插入模式；
- 命令行模式：在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开、显示行号等；按 `:` 即可进入
命令模式；


### vi 和 vim 的快捷键

- 拷贝当前行 `yy`，拷贝当前行向下的5行 `5yy`，按 `p` 粘贴；
- 删除当前行 `dd`，删除当前行向下的5行 `5dd`； 
- 在文件中查找某个单词【命令行下 `/关键字`，回车查找，输入 n 就是查找下一个】
- 设置文件的行号，取消文件的行号【命令行下，`:set nu` 、`:set nonu` 】
- 快捷键到达文件的最末行【`G`】和最首行【`gg`】；
- 在一个文件中输入文字，然后又要撤销这个动作 `u`；
- 将光标移动到指定行
    1. `:set nu`】显示行号；
    2. 输入20这个数；
    3. 【`shift + g`】；
    


## 开机、重启、用户登录注销

### 关机 & 重启命令

- `shutdown -h now`：立即进行关机；
- `shutdown -h 1` ：1分钟后会关机；
- `shutdown -r now`：重启计算机；
- `halt`：关机，作用和上面一样；
- `reboot`：现在重新启动计算机；
- `sync`：把内存的数据同步到磁盘；

### 用户登录注销

- 登录时尽量少用 `root` 账号，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通
用户登录，登录之后再利用 `su - 用户名` 来切换成系统管理员身份；
- 在提示符下输入 `logout` or `exit` 即可注销用户； 



## 用户管理

Linux 系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员
申请一个账号，然后以这个账号的身份进入系统。

Linux 系统的用户至少要属于一个组。


### 用户基本语法

- `useradd [选项] 用户名`：添加用户；
    + 当用户创建成功后，会自动在 `/home/` 下创建和用户名同名的家目录；
    + 也可以通过 `useradd -d 目录 用户名` 指定目录新的用户名，给新创建的用户指定家目录；
- `passwd 用户名`：设置/修改密码；
- `userdel 用户名`：删除用户；
    + 删除用户保留家目录： `userdel 用户名`；
    + 删除用户且删除家目录： `userdel -r 用户名`；
- `id 用户名`：查看用户；
- `su - 用户名`：切换用户；
    + 当一个高权限用户切换到低权限用户时，不用输入密码；
    + `exit` 可以退出切换的用户回到原先的用户；
- `whoami` / `who am i`：查看当前用户/登录用户；


### 用户组

类似于角色，系统可以对有共性的多个用户进行统一的管理。

基本语法
- `groupadd 组名`：新增一个组；
- `groupdel 组名`：删除一个组；
- `useradd -g 用户组 用户名`：添加用户时直接加上组；
- `usermod -g 用户组 用户名`：修改用户的组；


### 用户和组的相关文件

- `/etc/passwd` 文件
    + 用户（user） 的配置文件，记录用户的各种信息；
    + 每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell；
- `/etc/shadow` 文件
    + 口令的配置文件；
    + 每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志；
- `/etc/group` 文件
    + 组（group）的配置文件，记录 Linux 包含的组的信息；
    + 每行的含义：组名:口令:组标识号:组内用户列表；
